##
## Copyright (c) 2014-present, Facebook, Inc.
## All rights reserved.
##
## This source code is licensed under the University of Illinois/NCSA Open
## Source License found in the LICENSE file in the root directory of this
## source tree. An additional grant of patent rights can be found in the
## PATENTS file in the same directory.
##

branches:
  only:
    - master

language: cpp

os:
  - linux
  - osx

osx_image: xcode7
dist: trusty
sudo: required

env:
  - ARCH="X86"
  - ARCH="X86_64"

compiler:
  - gcc
  - clang

matrix:
  fast_finish: true
  exclude:
    - os: osx
      env: ARCH="X86"
  include:
    - os: linux
      env: ANDROID_BUILDS="1"
      compiler: gcc

# Use travis_retry during install to reduce the impact of network failures.
before_install: travis_retry ./Support/Testing/Travis/before-install.py
install:        travis_retry ./Support/Testing/Travis/install.py
script:         ./Support/Testing/Travis/script.sh
after_success:  ./Support/Testing/Travis/after_success.sh
