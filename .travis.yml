##
## Copyright (c) 2014-present, Facebook, Inc.
## All rights reserved.
##
## This source code is licensed under the University of Illinois/NCSA Open
## Source License found in the LICENSE file in the root directory of this
## source tree. An additional grant of patent rights can be found in the
## PATENTS file in the same directory.
##

sudo: false
dist: precise
branches:
  only:
    - master
matrix:
  fast_finish: true

addons:
  apt:
    sources:
      - llvm-toolchain-precise-3.7
      - ubuntu-toolchain-r-test
      - extras-precise
      - kubuntu-backports
      - r-packages-precise
    packages:
      - clang-format-3.7
      - flex
      - bison
      - swig
      - g++-4.8
      - clang-3.7
      - g++-4.8-multilib
      #- g++-mingw-w64-i686
      - lldb-3.7
      - liblldb-3.7
      - python-lldb-3.7
      - realpath

env:
  - TARGET="Style"
  - TARGET="Registers"
############################
# Build targets            #
############################
  - TARGET="Android-ARM"
  - TARGET="Android-ARM64"
  - TARGET="Android-X86"
  - TARGET="Android-X86_64"
  - TARGET="MinGW-X86"
  - TARGET="Tizen-ARM"
  - TARGET="Tizen-X86"
############################
# LLDB Unit tests - x86    #
############################
  - TARGET="Linux-X86"      LLDB_TESTS="all"  CLANG="0"
  - TARGET="Linux-X86"      LLDB_TESTS="all"  CLANG="0" RELEASE="1"
  - TARGET="Linux-X86"      LLDB_TESTS="all"  CLANG="1"
  - TARGET="Linux-X86"      LLDB_TESTS="all"  CLANG="1" RELEASE="1"
############################
# LLDB Unit tests - x86_64 #
############################
  - TARGET="Linux-X86_64"   LLDB_TESTS="all"  CLANG="0"
  - TARGET="Linux-X86_64"   LLDB_TESTS="all"  CLANG="0" RELEASE="1"
  - TARGET="Linux-X86_64"   LLDB_TESTS="all"  CLANG="1"
  - TARGET="Linux-X86_64"   LLDB_TESTS="all"  CLANG="1" RELEASE="1"

install:        ./Support/Testing/Travis/install.py
script:         ./Support/Testing/Travis/script.sh
